<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Iridology â€” Advanced Iris Analysis</title>
    <link rel="stylesheet" href="/src/style.css" />
    <!-- OpenCV.js from official docs (auto-updates). If you're offline, supply a local opencv.js build. -->
    <script
      async
      src="https://docs.opencv.org/4.x/opencv.js"
      onload="onOpenCvReady()"
    ></script>
    <script type="module" src="/src/main.js"></script>
  </head>
  <body>
    <!-- OpenCV Loading Overlay -->
    <div id="cvLoader" class="loader-overlay" style="display: flex">
      <div class="loader-container">
        <div class="spinner"></div>
        <p class="loader-text">Loading OpenCV...</p>
      </div>
    </div>
    <header class="header">
      <div class="header-content">
        <div class="header-title">
          <h1>Iridology Analyzer</h1>
          <p class="subtitle">
            Advanced Iris & Pupil Detection with Sector Mapping
          </p>
          <h2>How it works</h2>
          <p>
            Upload or capture two photos (Left and Right eye). The app detects
            the pupil (Daugman-like + contour) and the iris (edge/Hough and
            Daugman fallback). Circles are overlaid on each image.
          </p>
        </div>
      </div>
    </header>

    <main class="main-content">
      <section class="analysis-section">
        <h2 class="section-title">Analysis</h2>
        <div class="eyes-container">
          <div class="eye-card" id="leftCard">
            <div class="eye-header">
              <h3>ğŸ‘ï¸ Left Eye</h3>
              <span class="eye-label">Left</span>
            </div>
            <div class="controls">
              <input id="leftFile" type="file" accept="image/*" />
              <button id="leftCamBtn" class="btn btn-primary">ğŸ“· Camera</button>
              <button id="leftClearBtn" class="btn btn-secondary">
                ğŸ—‘ï¸ Clear
              </button>
            </div>
            <canvas
              id="leftCanvas"
              width="640"
              height="480"
              class="eye-canvas"
            ></canvas>
            <div id="leftMsg" class="message" aria-live="polite"></div>
            <div
              id="leftUnwrapContainer"
              class="unwrap-container"
              style="display: none"
            >
              <h4>ğŸ“Š Unwrapped Iris Map</h4>
              <canvas
                id="leftUnwrapCanvas"
                width="2000"
                height="2000"
                class="unwrap-canvas"
              ></canvas>
            </div>
          </div>

          <div class="eye-card" id="rightCard">
            <div class="eye-header">
              <h3>ğŸ‘ï¸ Right Eye</h3>
              <span class="eye-label">Right</span>
            </div>
            <div class="controls">
              <input id="rightFile" type="file" accept="image/*" />
              <button id="rightCamBtn" class="btn btn-primary">
                ğŸ“· Camera
              </button>
              <button id="rightClearBtn" class="btn btn-secondary">
                ğŸ—‘ï¸ Clear
              </button>
            </div>
            <canvas
              id="rightCanvas"
              width="640"
              height="480"
              class="eye-canvas"
            ></canvas>
            <div id="rightMsg" class="message" aria-live="polite"></div>
            <div
              id="rightUnwrapContainer"
              class="unwrap-container"
              style="display: none"
            >
              <h4>ğŸ“Š Unwrapped Iris Map</h4>
              <canvas
                id="rightUnwrapCanvas"
                width="2000"
                height="2000"
                class="unwrap-canvas"
              ></canvas>
            </div>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
